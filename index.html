<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Safety & Tech Share Wheel</title>

<style>
/* ---------- GLOBAL UI THEME ---------- */
:root {
  --bg: #0d1117;
  --card: rgba(255,255,255,0.08);
  --glass: rgba(255,255,255,0.12);
  --accent: #00b4ff;
  --accent2: #ff5f8d;
  --text: #e6e6e6;
  --radius: 16px;
}

body {
  margin: 0;
  font-family: "Segoe UI", sans-serif;
  background: var(--bg);
  color: var(--text);
  display: flex;
  height: 100vh;
  overflow: hidden;
}

/* ---------- PANELS ---------- */

.sidebar, .sidebar-right {
  width: 22%;
  padding: 20px;
  overflow-y: auto;
  backdrop-filter: blur(16px);
  background: var(--card);
  border-right: 1px solid rgba(255,255,255,0.08);
}
.sidebar-right {
  border-right: none;
  border-left: 1px solid rgba(255,255,255,0.08);
}

h3 {
  margin-top: 0;
  text-transform: uppercase;
  letter-spacing: 2px;
  opacity: 0.8;
}

/* ---------- MAIN AREA ---------- */

.main {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 25px;
}

h2 {
  margin: 10px;
  font-size: 28px;
  letter-spacing: 1px;
}

/* ---------- INPUT + BUTTONS ---------- */
input {
  padding: 12px 15px;
  width: 280px;
  border-radius: var(--radius);
  border: none;
  background: var(--glass);
  color: var(--text);
  outline: none;
  margin-bottom: 10px;
  font-size: 16px;
}

.btn {
  padding: 12px 22px;
  margin: 5px;
  border-radius: var(--radius);
  font-size: 16px;
  cursor: pointer;
  border: none;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  color: white;
  transition: 0.25s;
}
.btn:hover {
  transform: scale(1.05);
  box-shadow: 0 0 12px var(--accent);
}

/* Reset button style */
.reset-btn {
  background: #ff3333;
}
.reset-btn:hover {
  box-shadow: 0 0 12px #ff3333;
}

/* ---------- WHEEL UI ---------- */

#wrapper {
  position: relative;
  margin-top: 25px;
}

#pointer {
  width: 0;
  height: 0;
  border-left: 22px solid transparent;
  border-right: 22px solid transparent;
  border-bottom: 35px solid var(--accent2);
  margin: 0 auto;
  animation: pulse 1s infinite alternate;
}
@keyframes pulse {
  from { transform: translateY(0); }
  to { transform: translateY(-4px); }
}

#wheel {
  margin-top: 10px;
  width: 380px;
  height: 380px;
  border-radius: 50%;
  border: 8px solid rgba(255,255,255,0.15);
  position: relative;
  overflow: hidden;
  background: conic-gradient(var(--accent) 0deg, var(--accent2) 360deg);
  transition: transform 6s cubic-bezier(.1, .9, .1, 1);
  box-shadow: 0 0 25px rgba(0,0,0,0.4);
}

.slice-label {
  position: absolute;
  width: 50%;
  left: 50%;
  top: 50%;
  transform-origin: 0% 50%;
  text-align: left;
  padding-left: 10px;
  font-size: 14px;
  rotate: -90deg;
  color: #fff;
}

/* ---------- RESULT ---------- */
#result {
  margin-top: 20px;
  font-size: 24px;
  height: 60px;
  text-align: center;
}

/* ---------- LIST STYLES ---------- */
.list-item {
  padding: 8px 12px;
  background: var(--glass);
  border-radius: var(--radius);
  margin-bottom: 8px;
}
</style>
</head>

<body>

<!-- LEFT PANEL: Remaining -->
<div class="sidebar">
  <h3>Remaining</h3>
  <div id="remainingList"></div>
</div>

<!-- MAIN AREA -->
<div class="main">
  <h2>Safety & Tech Wheel</h2>

  <input id="nameInput" placeholder="Add new names" />
  <button class="btn" onclick="addNames()">Add</button>
  <button class="btn reset-btn" onclick="triggerReset()">Reset All</button>

  <div>
    <button class="btn" onclick="startSpin('safety')">Spin Safety</button>
    <button class="btn" onclick="startSpin('tech')">Spin Tech</button>
  </div>

  <div id="wrapper">
    <div id="pointer"></div>
    <div id="wheel"></div>
  </div>

  <div id="result"></div>
</div>

<!-- RIGHT PANEL: Chosen -->
<div class="sidebar-right">
  <h3>Chosen</h3>
  <div id="chosenList"></div>
</div>

<script>
/* ---------- DEFAULT ROSTER ---------- */
const defaultRoster = [
  "Ali Santiago","Anna Hutchinson","Austin Bartoszek","Brian Kloppe",
  "Casey Williams","Carter Nelson","Christian A. Johnston","Christie Walters",
  "Daniel Taggart","Emiliano Garcia","Frank Bottiglieri","Grace Frigaard",
  "Greg Waters","Ian Manhoo","Jim Pesek","Julissa Vergara",
  "Kevin Ferm","Kyle Young","Mark Besser","Patrick McCarron",
  "Rey Rodriguez","Richard Fredette","Shaun Thomas","Shane Bowen",
  "Stacie Gray","Steve Lauer","Timothy Costello"
];

/* ---------- LOAD STORAGE OR INIT ---------- */
let names = JSON.parse(localStorage.getItem("names")) || [...defaultRoster];
let remainingSafety = JSON.parse(localStorage.getItem("remainingSafety")) || [...defaultRoster];
let remainingTech = JSON.parse(localStorage.getItem("remainingTech")) || [...defaultRoster];
let chosenHistory = JSON.parse(localStorage.getItem("chosenHistory")) || [];

function save() {
  localStorage.setItem("names", JSON.stringify(names));
  localStorage.setItem("remainingSafety", JSON.stringify(remainingSafety));
  localStorage.setItem("remainingTech", JSON.stringify(remainingTech));
  localStorage.setItem("chosenHistory", JSON.stringify(chosenHistory));
}

/* ---------- RESET WITH CONFIRMATION ---------- */
function triggerReset() {
  if (!confirm("âš ï¸ Are you sure you want to RESET ALL PROGRESS?\nThis cannot be undone.")) {
    return;
  }

  localStorage.clear();
  names = [...defaultRoster];
  remainingSafety = [...defaultRoster];
  remainingTech = [...defaultRoster];
  chosenHistory = [];
  save();
  updateLists();
  buildWheel(names);
  document.getElementById("result").innerHTML = "Progress Reset.";
}

/* ---------- BUILD WHEEL ---------- */
function buildWheel(list) {
  const wheel = document.getElementById("wheel");
  wheel.innerHTML = "";
  const sliceAngle = 360 / list.length;

  list.forEach((name, i) => {
    const label = document.createElement("div");
    label.className = "slice-label";
    label.style.transform = `rotate(${sliceAngle * i}deg) translate(0, -50%)`;
    label.textContent = name;
    wheel.appendChild(label);
  });
}

/* ---------- ADD NAMES ---------- */
function addNames() {
  let input = document.getElementById("nameInput").value.trim();
  if (!input) return;

  let newNames = input.split(",").map(n => n.trim()).filter(n => n);

  newNames.forEach(n => {
    if (!names.includes(n)) {
      names.push(n);
      remainingSafety.push(n);
      remainingTech.push(n);
    }
  });

  document.getElementById("nameInput").value = "";
  save();
  updateLists();
  buildWheel(names);
}

/* ---------- SPIN ---------- */
let spinning = false;

function startSpin(type) {
  if (spinning) return;
  spinning = true;

  let pool = type === "safety" ? remainingSafety : remainingTech;

  if (pool.length === 0) {
    pool = type === "safety"
      ? (remainingSafety = [...names])
      : (remainingTech = [...names]);
  }

  buildWheel(pool);

  const wheel = document.getElementById("wheel");

  const index = Math.floor(Math.random() * pool.length);
  const winner = pool[index];
  const sliceAngle = 360 / pool.length;

  const finalRotation = 360 * 12 + (360 - (index * sliceAngle + sliceAngle / 2));

  wheel.style.transform = `rotate(${finalRotation}deg)`;

  setTimeout(() => {
    spinning = false;

    pool.splice(index, 1);
    chosenHistory.push(winner);
    save();

    document.getElementById("result").innerHTML = `ðŸŽ‰ ${winner} ðŸŽ‰`;
    updateLists();
  }, 6000);
}

/* ---------- UPDATE LISTS ---------- */
function updateLists() {
  document.getElementById("remainingList").innerHTML =
    names.map(n => `<div class="list-item">${n}</div>`).join("");

  document.getElementById("chosenList").innerHTML =
    chosenHistory.map(n => `<div class="list-item">âœ” ${n}</div>`).join("");
}

/* ---------- INIT ---------- */
buildWheel(names);
updateLists();
</script>

</body>
</html>
