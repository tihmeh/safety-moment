<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Safety & Tech Share Wheel â€” FINAL WORKING VERSION</title>

<style>
:root {
    --bg: #0b0f17;
    --bg2: #141b29;
    --accent1: #00eaff;
    --accent2: #ff4da6;
    --accent3: #8a2eff;
    --glass: rgba(255,255,255,0.07);
    --radius: 18px;
    --text: #e9ecf2;
}

body {
    margin: 0;
    background: radial-gradient(circle at top, var(--bg2), var(--bg));
    font-family: "Segoe UI", sans-serif;
    color: var(--text);
    height: 100vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
}

#winnerBanner {
    margin-top: 15px;
    padding: 18px 28px;
    background: linear-gradient(135deg, var(--accent1), var(--accent2));
    border-radius: var(--radius);
    font-size: 28px;
    font-weight: bold;
    min-height: 50px;
    text-align: center;
}

.controls {
    margin-top: 10px;
    display: flex;
    gap: 14px;
}

.btn {
    padding: 12px 24px;
    border: none;
    border-radius: var(--radius);
    color: white;
    cursor: pointer;
    font-size: 17px;
    background: linear-gradient(135deg, var(--accent1), var(--accent3));
}

.reset-btn {
    background: linear-gradient(135deg, #ff3333, #ff0066);
}

#pointer {
    width: 0;
    height: 0;
    border-left: 25px solid transparent;
    border-right: 25px solid transparent;
    border-bottom: 40px solid var(--accent2);
    margin: 10px auto;
}

#wheel {
    width: 420px;
    height: 420px;
    border-radius: 50%;
    border: 6px solid rgba(255,255,255,0.2);
    background: conic-gradient(
        var(--accent1) 0deg 30deg,
        var(--accent2) 30deg 60deg,
        var(--accent1) 60deg 90deg,
        var(--accent2) 90deg 120deg,
        var(--accent1) 120deg 150deg,
        var(--accent2) 150deg 180deg,
        var(--accent1) 180deg 210deg,
        var(--accent2) 210deg 240deg,
        var(--accent1) 240deg 270deg,
        var(--accent2) 270deg 300deg,
        var(--accent1) 300deg 330deg,
        var(--accent2) 330deg 360deg
    );
    position: relative;
    overflow: hidden;
    transition: transform 6s cubic-bezier(.14,.78,.23,1);
}

.sliceLabel {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 48%;
    transform-origin: 0% 50%;
    text-align: right;
    padding-right: 12px;
    font-size: 18px;
    font-weight: bold;
    color: white;
}

.sidePanelContainer {
    position: absolute;
    top: 100px;
    width: 95%;
    display: flex;
    justify-content: space-between;
}

.panel {
    width: 200px;
    height: 340px;
    background: var(--glass);
    border-radius: var(--radius);
    padding: 12px;
    overflow-y: auto;
}

.listItem {
    padding: 8px;
    margin-bottom: 6px;
    background: rgba(255,255,255,0.12);
    border-radius: var(--radius);
}
</style>
</head>

<body>

<div id="winnerBanner">Spin the Wheel!</div>

<div class="controls">
    <button class="btn" onclick="spin('safety')">Spin Safety</button>
    <button class="btn" onclick="spin('tech')">Spin Tech</button>
    <button class="btn reset-btn" onclick="resetAll()">Reset</button>
</div>

<div id="pointer"></div>
<div id="wheel"></div>

<div class="sidePanelContainer">
    <div class="panel">
        <h3>Remaining</h3>
        <div id="remainingList"></div>
    </div>
    <div class="panel">
        <h3>Selected</h3>
        <div id="chosenList"></div>
    </div>
</div>

<script>

/* ------------------ DATA ------------------ */
const defaultRoster = [
  "Ali Santiago","Anna Hutchinson","Austin Bartoszek","Brian Kloppe",
  "Casey Williams","Carter Nelson","Christian A. Johnston","Christie Walters",
  "Daniel Taggart","Emiliano Garcia","Frank Bottiglieri","Grace Frigaard",
  "Greg Waters","Ian Manhoo","Jim Pesek","Julissa Vergara",
  "Kevin Ferm","Kyle Young","Mark Besser","Patrick McCarron",
  "Rey Rodriguez","Richard Fredette","Shaun Thomas","Shane Bowen",
  "Stacie Gray","Steve Lauer","Timothy Costello"
];

function load(key, fallback) {
    let x = JSON.parse(localStorage.getItem(key));
    if (!Array.isArray(x) || x.length === 0) {
        localStorage.setItem(key, JSON.stringify(fallback));
        return [...fallback];
    }
    return x;
}

let names = load("names", defaultRoster);
let safetyPool = load("safetyPool", names);
let techPool = load("techPool", names);
let chosenHistory = load("chosenHistory", []);

/* ------------------ UTIL ------------------ */
const initials = name => name.split(" ").map(n => n[0]).join("").toUpperCase();

function saveState() {
    localStorage.setItem("names", JSON.stringify(names));
    localStorage.setItem("safetyPool", JSON.stringify(safetyPool));
    localStorage.setItem("techPool", JSON.stringify(techPool));
    localStorage.setItem("chosenHistory", JSON.stringify(chosenHistory));
}

/* ------------------ BUILD WHEEL ------------------ */
function buildWheel(pool) {
    const wheel = document.getElementById("wheel");
    wheel.innerHTML = "";

    const angle = 360 / pool.length;

    for (let i = 0; i < pool.length; i++) {
        const div = document.createElement("div");
        div.className = "sliceLabel";
        div.textContent = initials(pool[i]);
        div.style.transform = `rotate(${i * angle}deg) translate(0, -50%)`;
        wheel.appendChild(div);
    }
}

/* ------------------ SPIN ------------------ */
let spinning = false;

function spin(type) {
    if (spinning) return;
    spinning = true;

    let pool = type === "safety" ? safetyPool : techPool;
    if (pool.length === 0) pool = type === "safety" ? (safetyPool = [...names]) : (techPool = [...names]);

    buildWheel(pool);

    const wheel = document.getElementById("wheel");
    const angle = 360 / pool.length;
    const index = Math.floor(Math.random() * pool.length);
    const winner = pool[index];

    wheel.style.transition = "none";
    wheel.style.transform = "rotate(0.0001deg)";
    wheel.offsetHeight;

    const landing = 360 * 20 + (360 - (index * angle + angle / 2));
    wheel.style.transition = "transform 6s cubic-bezier(.14,.78,.23,1)";
    wheel.style.transform = `rotate(${landing}deg)`;

    setTimeout(() => {
        spinning = false;
        pool.splice(index, 1);
        chosenHistory.unshift(winner);
        saveState();

        document.getElementById("winnerBanner").textContent =
            `ðŸ† Congratulations, ${winner}!`;

        updateLists();
    }, 6100);
}

/* ------------------ LISTS ------------------ */
function updateLists() {
    document.getElementById("remainingList").innerHTML =
        names.map(n => `<div class='listItem'>${n}</div>`).join("");

    document.getElementById("chosenList").innerHTML =
        chosenHistory.map(n => `<div class='listItem'>âœ” ${n}</div>`).join("");
}

/* ------------------ RESET ------------------ */
function resetAll() {
    if (!confirm("Reset ALL progress?")) return;
    localStorage.clear();
    names = [...defaultRoster];
    safetyPool = [...defaultRoster];
    techPool = [...defaultRoster];
    chosenHistory = [];
    saveState();
    updateLists();
    buildWheel(names);
}

/* ------------------ INIT ------------------ */
buildWheel(names);
updateLists();

</script>
</body>
</html>
